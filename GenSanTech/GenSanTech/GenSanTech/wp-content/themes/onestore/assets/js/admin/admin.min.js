!function(t){"use strict";t(window),t(document);var e=t("body");t((function(){e.on("click",".onestore-admin-upload-control-button",(function(e){e.preventDefault();var a=t(this).closest(".onestore-admin-upload-control"),n=a.find("input"),o=a.data("wpmedia");if(o)o.open();else{var i={title:a.attr("data-title"),button:{text:a.attr("data-button")},multiple:!1};""!==a.attr("data-library")&&(i.library={type:a.attr("data-library").split(",")}),(o=wp.media.frames.file_frame=wp.media(i)).on("select",(function(){var t=o.state().get("selection").first().toJSON();n.val(t.url)})),o.open(),a.data("wpmedia",o)}})),t.fn.select2&&t(".onestore-admin-multiselect-control").select2(),t.fn.wpColorPicker&&t(".onestore-admin-color-control").find("input").wpColorPicker(),e.on("change",".onestore-admin-dependent-field",(function(){var e=t(this),a=t('[data-dependency="'+e.attr("name")+'"]'),n=this.value;a.hide(),a.each((function(){var e,a=t(this);switch(e=-1<a.attr("data-value").split(",").indexOf(n),a.attr("data-operator")){case"!=":e||a.show();break;default:e&&a.show()}}))})),t(".onestore-admin-dependent-field").trigger("change"),t(".onestore-admin-metabox").each((function(){var e=t(this),a=e.find(".onestore-admin-metabox-nav"),n=e.find(".onestore-admin-metabox-panels");a.on("click",".onestore-admin-metabox-nav-item a",(function(e){e.preventDefault();var o=t(this),i=n.children(o.attr("href"));i&&!i.hasClass("active")&&(a.children(".onestore-admin-metabox-nav-item.active").removeClass("active"),o.parent(".onestore-admin-metabox-nav-item").addClass("active"),n.children(".onestore-admin-metabox-panel.active").removeClass("active"),i.addClass("active"))})),e.trigger("onestore-admin-metabox.ready",this)})),t(".onestore-rating-notice").on("click",".onestore-rating-notice-close",(function(e){var a=t(this),n=a.closest(".onestore-rating-notice"),o=a.attr("data-onestore-rating-notice-repeat");t.ajax({method:"POST",dataType:"JSON",url:ajaxurl,data:{action:"onestore_rating_notice_close",repeat_after:o}}),n.remove()})),t(".onestore-admin-install-sites-import-plugin-button").on("click",(function(e){var a=t(this);return a.prop("disabled","disabled"),a.addClass("disabled"),a.html(OneStoreAdminData.strings.installing),t.ajax({method:"POST",dataType:"JSON",url:ajaxurl+"?do=onestore_install_sites_import_plugin",cache:!1,data:{action:"onestore_install_sites_import_plugin",plugin_slug:"onestore-sites-import",_ajax_nonce:OneStoreAdminData.ajax_nonce}}).done((function(t,e,n){t.success?(a.html(OneStoreAdminData.strings.redirecting_to_demo_list),window.location=OneStoreAdminData.sitesImportPageURL):alert(OneStoreAdminData.strings.error_installing_plugin)}))}))}))}(jQuery);