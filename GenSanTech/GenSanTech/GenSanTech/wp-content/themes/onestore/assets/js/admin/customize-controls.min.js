!function(e,t){"use strict";var n=t(window),o=(t(document),t("body"));if(null==i)var i=function(e,t){t=decodeURI(t),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))};var r=function(e){var n=e.target;""!==n.value?(""!==n.max&&(n.value=Math.min(Number(n.value),Number(n.max))),""!==n.min&&(n.value=Math.max(Number(n.value),Number(n.min))),t(n).trigger("change")):t(n).trigger("change")};t("#customize-controls").on("blur",'input[type="number"]',r),t("#customize-controls").on("keyup",'input[type="number"]',(function(e){13==e.which&&r(e)})),t("#customize-controls").on("focus",'input[type="number"]',(function(e){t(this).on("mousewheel.disableScroll",(function(e){e.preventDefault()}))})),t("#customize-controls").on("blur",'input[type="number"]',(function(e){t(this).off("mousewheel.disableScroll")})),wp.customize.sectionConstructor["main-section-pro-teaser"]=wp.customize.sectionConstructor["main-section-pro-link"]=wp.customize.sectionConstructor["main-section-spacer"]=wp.customize.Section.extend({attachEvents:function(){},isContextuallyActive:function(){return!0}}),wp.customize.OneStoreControl=wp.customize.Control.extend({initialize:function(e,t){var n=t||{};n.params=n.params||{},n.params.type||(n.params.type="onestore-base"),n.params.content||(n.params.content=jQuery("<li></li>"),n.params.content.attr("id","customize-control-"+e.replace(/]/g,"").replace(/\[/g,"-")),n.params.content.attr("class","customize-control customize-control-"+n.params.type)),this.propertyElements=[],wp.customize.Control.prototype.initialize.call(this,e,n)},_setUpSettingRootLinks:function(){var e=this;e.container.find("[data-customize-setting-link]").each((function(){var t=jQuery(this);wp.customize(t.data("customizeSettingLink"),(function(n){var o=new wp.customize.Element(t);e.elements.push(o),o.sync(n),o.set(n())}))}))},_setUpSettingPropertyLinks:function(){var e=this;e.setting&&e.container.find("[data-customize-setting-property-link]").each((function(){var t,n=jQuery(this),o=n.data("customizeSettingPropertyLink");t=new wp.customize.Element(n),e.propertyElements.push(t),t.set(e.setting()[o]),t.bind((function(t){var n=e.setting();t!==n[o]&&((n=_.clone(n))[o]=t,e.setting.set(n))})),e.setting.bind((function(e){e[o]!==t.get()&&t.set(e[o])}))}))},ready:function(){var e=this;e._setUpSettingRootLinks(),e._setUpSettingPropertyLinks(),wp.customize.Control.prototype.ready.call(e),e.deferred.embedded.done((function(){}))},embed:function(){var e=this,t=e.section();t&&wp.customize.section(t,(function(t){t.expanded()||wp.customize.settings.autofocus.control===e.id?e.actuallyEmbed():t.expanded.bind((function(t){t&&e.actuallyEmbed()}))}))},actuallyEmbed:function(){var e=this;"resolved"!==e.deferred.embedded.state()&&(e.renderContent(),e.deferred.embedded.resolve(),e.container.trigger("init"))},focus:function(e){this.actuallyEmbed(),wp.customize.Control.prototype.focus.call(this,e)}}),wp.customize.controlConstructor["onestore-base"]=wp.customize.OneStoreControl,wp.customize.controlConstructor["onestore-color"]=wp.customize.OneStoreControl.extend({ready:function(){var e=this,t=e.container.find(".color-picker");t.alphaColorPicker({change:function(){e.setting.set(t.wpColorPicker("color"))},clear:function(){e.setting.set("")}})}}),wp.customize.controlConstructor["onestore-shadow"]=wp.customize.OneStoreControl.extend({ready:function(){var e=this,n=e.container.find(".onestore-shadow-input"),o=e.container.find(".onestore-shadow-value");e.updateValue=function(e){var i=n.map((function(){return t(this).hasClass("color-picker")?""===t(this).wpColorPicker("color")?"rgba(0,0,0,0)":t(this).wpColorPicker("color"):""===this.value?"0":this.value.toString()+"px"})).get();o.val(i.join(" ")).trigger("change")},e.container.find(".onestore-shadow-color .color-picker").alphaColorPicker({change:e.updateValue,clear:e.updateValue}),e.container.on("change blur",".onestore-shadow-input",e.updateValue)}}),wp.customize.controlConstructor["onestore-dimension"]=wp.customize.OneStoreControl.extend({ready:function(){this.container.find(".onestore-dimension-fieldset").each((function(e,n){var o=t(n),i=o.find(".onestore-dimension-unit"),r=o.find(".onestore-dimension-input"),a=o.find(".onestore-dimension-value");i.on("change",(function(e){var t=i.find('option[value="'+this.value+'"]');r.attr("min",t.attr("data-min")),r.attr("max",t.attr("data-max")),r.attr("step",t.attr("data-step")),r.val("").trigger("change")})),r.on("change blur",(function(e){var t=""===this.value?"":this.value.toString()+i.val().toString();a.val(t).trigger("change")}))}))}}),wp.customize.controlConstructor["onestore-slider"]=wp.customize.OneStoreControl.extend({ready:function(){this.container.find(".onestore-slider-fieldset").each((function(e,n){var o=t(n),i=o.find(".onestore-slider-unit"),r=o.find(".onestore-slider-input"),a=o.find(".onestore-slider-ui"),s=o.find(".onestore-slider-reset"),c=o.find(".onestore-slider-value");a.slider({value:r.val(),min:+r.attr("min"),max:+r.attr("max"),step:+r.attr("step"),slide:function(e,t){r.val(t.value).trigger("change")}}),s.on("click",(function(e){var n=t(this).attr("data-number"),o=t(this).attr("data-unit");i.val(o),r.val(n).trigger("change"),a.slider("value",n)})),i.on("change",(function(e){var t=i.find('option[value="'+this.value+'"]');r.attr("min",t.attr("data-min")),r.attr("max",t.attr("data-max")),r.attr("step",t.attr("data-step")),a.slider("option",{min:+r.attr("min"),max:+r.attr("max"),step:+r.attr("step")}),r.val("").trigger("change")})),r.on("change blur",(function(e){a.slider("value",this.value);var t=""===this.value?"":this.value.toString()+i.val().toString();c.val(t).trigger("change")}))}))}}),wp.customize.controlConstructor["onestore-dimensions"]=wp.customize.OneStoreControl.extend({ready:function(){this.container.find(".onestore-dimensions-fieldset").each((function(e,n){var o=t(n),i=o.find(".onestore-dimensions-unit"),r=o.find(".onestore-dimensions-link"),a=o.find(".onestore-dimensions-unlink"),s=o.find(".onestore-dimensions-input"),c=o.find(".onestore-dimensions-value");i.on("change",(function(e){var t=i.find('option[value="'+this.value+'"]');s.attr("min",t.attr("data-min")),s.attr("max",t.attr("data-max")),s.attr("step",t.attr("data-step")),s.val("").trigger("change")})),r.on("click",(function(e){e.preventDefault(),o.attr("data-linked","true"),s.val(s.first().val()).trigger("change"),s.first().focus()})),a.on("click",(function(e){e.preventDefault(),o.attr("data-linked","false"),s.first().focus()})),s.on("keyup mouseup",(function(e){"true"==o.attr("data-linked")&&s.not(this).val(this.value).trigger("change")})),s.on("change blur",(function(e){var t,n=[],o=i.val().toString(),r=!0;s.each((function(){""===this.value?n.push("0"+o):(n.push(this.value.toString()+o),r=!1)})),t=r?"   ":n.join(" "),c.val(t).trigger("change")}))}))}}),wp.customize.controlConstructor["onestore-typography"]=wp.customize.OneStoreControl.extend({ready:function(){this.container.find(".onestore-typography-size").each((function(e,n){var o=t(n),i=o.find(".onestore-typography-size-unit"),r=o.find(".onestore-typography-size-input"),a=o.find(".onestore-typography-size-value"),s=function(e){var t=i.find('option[value="'+e+'"]');r.attr("min",t.attr("data-min")),r.attr("max",t.attr("data-max")),r.attr("step",t.attr("data-step"))};i.on("change",(function(e){s(this.value),r.val("").trigger("change")})),s(i.val()),r.on("change blur",(function(e){var t=""===this.value?"":this.value.toString()+i.val().toString();a.val(t).trigger("change")}))}))}}),wp.customize.controlConstructor["onestore-multicheck"]=wp.customize.OneStoreControl.extend({ready:function(){var e=this,t=e.container.find(".onestore-multicheck-input");t.on("change",(function(n){var o=[];t.each((function(){this.checked&&o.push(this.value)})),e.setting.set(o)}))}}),wp.customize.controlConstructor["onestore-radioimage"]=wp.customize.OneStoreControl.extend({ready:function(){var e=this;e.container.find(".onestore-radioimage-input").on("change",(function(t){e.setting.set(this.value)}))}}),wp.customize.controlConstructor["onestore-builder"]=wp.customize.OneStoreControl.extend({ready:function(){var e=this;e.builder=e.container.find(".onestore-builder"),e.builderLocations=e.builder.find(".onestore-builder-location"),e.builderInactive=e.builder.find(".onestore-builder-inactive"),e.updateValue=function(n){if("__inactive"!==n){var o=e.builderLocations.filter('[data-location="'+n+'"]').find(".onestore-builder-element"),i=[];o.each((function(){i.push(t(this).attr("data-value"))})),null!==e.settings?e.settings[n].set(i):e.setting.set(i)}},e.showHideAddButton=function(){var t=e.builder.find(".onestore-builder-element-add");0===e.builderInactive.find(".onestore-builder-element").length?t.hide():t.show()},e.showHideAddButton(),e.container.on("keyup","[tabindex]",(function(e){13!=e.which&&32!=e.which||t(this).trigger("click")})),e.container.on("click",".onestore-builder-element-add",(function(n){n.preventDefault();var o=t(this),i=o.closest(".onestore-builder-location"),r=o.closest(".onestore-builder-locations");e.builderInactive.prev().get(0)==i.get(0)&&e.builderInactive.hasClass("show")?e.builderInactive.removeClass("show").appendTo(r):e.builderInactive.addClass("show").insertAfter(i)})),e.container.on("click",".onestore-builder-inactive .onestore-builder-element",(function(n){if(n.preventDefault(),e.builderInactive.hasClass("show")){var o=t(this),i=e.builderInactive.prev(".onestore-builder-location");o.appendTo(i.children(".onestore-builder-sortable-panel")),e.builderInactive.removeClass("show"),e.updateValue(i.attr("data-location")),e.showHideAddButton()}})),e.container.on("click",".onestore-builder-element-delete",(function(n){n.preventDefault();var o=t(this).parent(".onestore-builder-element"),i=o.closest(".onestore-builder-location");o.prependTo(e.builderInactive.children(".onestore-builder-sortable-panel")),e.updateValue(i.attr("data-location")),e.showHideAddButton()})),e.container.find(".onestore-builder-sortable-panel").sortable({items:".onestore-builder-element:not(.onestore-builder-element-disabled)",connectWith:'.onestore-builder-sortable-panel[data-connect="'+e.builder.attr("data-name")+'"]',containment:e.container,update:function(n,o){e.updateValue(t(n.target).parent().attr("data-location")),e.showHideAddButton()},receive:function(e,n){0<=t(n.item).attr("data-limitations").split(",").indexOf(t(this).parent().attr("data-location"))&&t(n.sender).sortable("cancel")},start:function(n,o){for(var i=t(o.item).attr("data-limitations").split(","),r=0;r<i.length;++r){var a=e.builderLocations.filter('[data-location="'+i[r]+'"]');void 0!==a&&a.addClass("disabled")}},stop:function(t,n){e.builderLocations.removeClass("disabled"),e.builderInactive.removeClass("disabled")}}).disableSelection()}}),wp.customize.bind("ready",(function(){t("#customize-controls").on("click",".onestore-responsive-switcher-button",(function(e){e.preventDefault(),wp.customize.previewedDevice.set(t(this).attr("data-device"))}));var e=function(){var e=wp.customize.previewedDevice.get(),n=t("span.onestore-responsive-switcher-button"),o=t(".onestore-responsive-switcher-button.nav-tab");t(".onestore-responsive-fieldset").removeClass("active").filter(".preview-"+e).addClass("active"),n.removeClass("active").filter(".preview-"+e).addClass("active"),o.removeClass("nav-tab-active").filter(".preview-"+e).addClass("nav-tab-active")};wp.customize.previewedDevice.bind(e),wp.customize.section.each((function(t){t.expanded.bind(e)})),t("#customize-controls").on("click",".onestore-customize-set-preview-url",(function(e){e.preventDefault();var n=t(this).attr("href"),o=i("url",n);o!==wp.customize.previewer.previewUrl()&&wp.customize.previewer.previewUrl(o)})),t("#customize-controls").on("click",".onestore-customize-goto-control",(function(e){e.preventDefault();var n=t(this).attr("href"),o=i("autofocus[control]",n),r=i("autofocus[section]",n),a=i("autofocus[panel]",n);o?wp.customize.control(o).focus():r?wp.customize.section(r).focus():a&&wp.customize.panel(a).focus()})),onestoreCustomizerControlsData&&onestoreCustomizerControlsData.contexts&&_.each(onestoreCustomizerControlsData.contexts,(function(e,t){var n=function(e){switch(e){case"__device":return wp.customize.previewedDevice;default:return wp.customize(e)}},o=function(t){var o=function(){var t=!1,o=e.relation;return"OR"!==o&&(o="AND",t=!0),_.each(e,(function(e,i){if("relation"!=i&&("AND"!=o||0!=t)&&void 0!==e.setting){var r=!1,a=n(e.setting);if(void 0!==a){var s=e.operator,c=e.value,l=a.get();switch(null!=s&&"="!=s||(s="=="),s){case">":r=l>c;break;case"<":r=l<c;break;case">=":r=l>=c;break;case"<=":r=l<=c;break;case"in":r=0<=c.indexOf(l);break;case"not_in":r=0>c.indexOf(l);break;case"contain":r=0<=l.indexOf(c);break;case"not_contain":r=0>l.indexOf(c);break;case"!=":r=c!=l;break;case"empty":r=0==l.length;break;case"!empty":r=0<l.length;break;default:r=c==l}}switch(o){case"OR":t=t||r;break;default:t=t&&r}}})),t},i=function(){t.active.set(o())};_.each(e,(function(e,t){if("relation"!=t){var o=n(e.setting);void 0!==o&&o.bind(i)}})),t.active.validate=o,i()};0==t.indexOf("onestore_section")?wp.customize.section(t,o):wp.customize.control(t,o)}));var r=function(){var e=t(".control-section.onestore-builder-active");1324<=window.innerWidth&&o.hasClass("onestore-has-builder-active")&&0<e.length&&!e.hasClass("onestore-hide")?wp.customize.previewer.container.css({bottom:e.outerHeight()+"px"}):wp.customize.previewer.container.css({bottom:""})};n.on("resize",r),wp.customize.previewedDevice.bind((function(e){setTimeout((function(){r()}),250)}));var a=function(e){var i="onestore_panel_header"===e.id?wp.customize.section("onestore_section_header_builder"):wp.customize.section("onestore_section_footer_builder"),a=i.contentContainer;e.expanded.bind((function(e){_.each(i.controls(),(function(e){"resolved"!==e.deferred.embedded.state()&&(e.renderContent(),e.deferred.embedded.resolve(),e.container.trigger("init"))})),e?(o.addClass("onestore-has-builder-active"),a.addClass("onestore-builder-active")):(o.removeClass("onestore-has-builder-active"),a.removeClass("onestore-builder-active")),r()})),a.on("click",".onestore-builder-toggle",(function(e){e.preventDefault(),a.toggleClass("onestore-hide"),r()})),a.find(".onestore-builder-sortable-panel").on("sortover",(function(e,t){r()}));var s=function(){1324<=window.innerWidth?(a.insertAfter(t(".wp-full-overlay-sidebar-content")),i.expanded()&&i.collapse()):a.appendTo(t("#customize-theme-controls"))};wp.customize.bind("pane-contents-reflowed",s),n.on("resize",s)};wp.customize.panel("onestore_panel_header",a),wp.customize.panel("onestore_panel_footer",a),wp.customize.control("footer_elements").container.on("init",e);var s=function(e){var n=t(this),o=0<=n.attr("id").indexOf("header")?"header":"footer",i=n.find(".onestore-builder-locations").addClass("onestore-builder-groups"),r=".onestore-builder-location-vertical_top, .onestore-builder-location-vertical_middle, .onestore-builder-location-vertical_bottom, .onestore-builder-location-mobile_vertical_top",a=n.find(r),s=n.find(".onestore-builder-location").not(r);a.length&&t(document.createElement("div")).addClass("onestore-builder-group onestore-builder-group-vertical onestore-builder-layout-block").appendTo(i).append(a),s.length&&t(document.createElement("div")).addClass("onestore-builder-group onestore-builder-group-horizontal onestore-builder-layout-inline").appendTo(i).append(s),n.find('.onestore-builder-element[data-value="logo"], .onestore-builder-element[data-value="mobile-logo"]').addClass("button-primary"),n.on("click",".onestore-builder-location .onestore-builder-element > span",(function(e){e.preventDefault();var n=t(this).parent(".onestore-builder-element"),i="heading_"+o+"_"+n.attr("data-value").replace("-","_"),r=wp.customize.control(i);r&&r.focus()})),n.on("click",".onestore-builder-group-edit",(function(e){e.preventDefault();var n="onestore_section_"+("footer_elements"==control.id?"footer":"header")+"_"+t(this).attr("data-value").replace("-","_"),o=wp.customize.section(n);o&&o.focus()}))};wp.customize.control("header_elements").container.on("init",s),wp.customize.control("header_mobile_elements").container.on("init",s),wp.customize.control("footer_elements").container.on("init",s)}))}(wp,jQuery);