!function(p){function u(i){var r;return r=(i=i.replace(/ /g,"")).match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)?(r=100*parseFloat(i.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)[1]).toFixed(2),parseInt(r)):100}function h(i,r,a,t){var n,e,o;n=r.data("a8cIris"),e=r.data("wpWpColorPicker"),n._color._alpha=i,o=n._color.toString(),r.val(o),e.toggler.css({"background-color":o}),t&&"true"===showOpacity&&f(i,a),r.wpColorPicker("color",o)}function f(i,r){r.slider("value",i),r.find(".ui-slider-handle").text(i.toString())}Color.prototype.toString=function(i){if("no-alpha"==i)return this.toCSS("rgba","1").replace(/\s+/g,"");if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var r=parseInt(this._color,10).toString(16);if(this.error)return"";if(r.length<6)for(var a=6-r.length-1;0<=a;a--)r="0"+r;return"#"+r},p.fn.alphaColorPicker=function(d){return void 0===d&&(d={}),this.each(function(){var n,t,i,e,o,r,a,c,l,s;(n=p(this)).wrap('<div class="alpha-color-picker-wrap"></div>'),i=n.attr("data-palette")||"true",e=n.attr("data-show-opacity")||"true",o=n.attr("data-default-color")||"",r=-1!==i.indexOf("|")?i.split("|"):"false"!=i,""==(t=n.val().replace(/\s+/g,""))&&(t=o),a={change:function(i,r){var a,t;a=n.wpColorPicker("color"),o==a&&"true"===e&&(t=u(a),l.find(".ui-slider-handle").text(t)),c.find(".transparency").css("background-color",r.color.toString("no-alpha")),p.isFunction(d.change)&&d.change.call(this,i)},clear:function(i,r){p.isFunction(d.clear)&&d.clear.call(this,i)},palettes:r},n.wpColorPicker(a),c=n.parents(".wp-picker-container:first"),"true"===e&&(p('<div class="alpha-color-picker-container"><div class="min-click-zone click-zone"></div><div class="max-click-zone click-zone"></div><div class="alpha-slider"></div><div class="transparency"></div></div>').appendTo(c.find(".wp-picker-holder")),l=c.find(".alpha-slider"),s={create:function(i,r){var a=p(this).slider("value");p(this).find(".ui-slider-handle").text(a),p(this).siblings(".transparency ").css("background-color",t)},value:u(t),range:"max",step:1,min:0,max:100,animate:300},l.slider(s),c.find(".min-click-zone").on("click",function(){h(0,n,l,!0)}),c.find(".max-click-zone").on("click",function(){h(100,n,l,!0)}),l.slider().on("slide",function(i,r){h(parseFloat(r.value)/100,n,l,!1),p(this).find(".ui-slider-handle").text(r.value)})),c.find(".iris-palette").on("click",function(){var i=p(this).css("background-color");if("true"===e){var r=u(i);f(r,l),100!=r&&(i=i.replace(/[^,]+(?=\))/,(r/100).toFixed(2)))}n.wpColorPicker("color",i)}),c.find(".button.wp-picker-default").on("click",function(){"true"===e&&f(u(o),l)}),n.on("input",function(){"true"===e&&f(u(p(this).val()),l)})})}}(jQuery);